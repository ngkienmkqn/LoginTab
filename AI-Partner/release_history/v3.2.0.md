# v3.2.0 Release Notes
**Release Date:** 2026-02-01

## ðŸ”’ Profile Lock UI Improvements

### Enhanced Status Detection
- **Hybrid Status Detection**: Now checks both `profile_usage_log` (poll data) AND `currently_used_by` database columns
- **Source Logging**: Console logs show whether status came from `poll` or `db` for debugging
- **Consistent State**: Profile status is now reliable across all client versions

### UI State Management
- **Loading Lock**: Added `isLoadingData` lock to prevent multiple simultaneous `loadAllData()` calls
- **Logout Reset**: `profileStatusLoaded`, `profileStatusMap`, and `statusPollingInterval` now properly reset on logout
- **Debug Logging**: Added `[Render]` logs showing `profileStatusLoaded` and `isInUseByOther` state for each profile

### Login Flow Optimization
- **Ordered Loading**: Profile status poll is now awaited before data load completes
- **Reduced Duplicate Renders**: Lock prevents multiple table renders during initial load

## ðŸ”§ Technical Changes

### renderer.js
- Added `isLoadingData` lock variable with finally block to release
- Added reset for profile status tracking in `handleLogout()`
- Enhanced `renderTable()` to check both `profileStatusMap` and DB columns
- Added debug logging for profile status during render

### main.js
- `get-profile-status` now uses `profile_usage_log` for reliable session detection
- `kick-profile-user` now inserts CLOSE event to `profile_usage_log` when kicking

## ðŸ“‹ Files Modified
- `src/ui/renderer.js` - UI state management improvements
- `main.js` - Backend status detection changes
- `package.json` - Version bump to 3.2.0

## ðŸ§ª Testing Notes
1. Login and verify buttons show correct status (In Use / Open)
2. Open profile â†’ verify "ðŸŸ¢ You" badge appears
3. Admin kick â†’ verify profile reverts to available state
4. Logout/re-login â†’ verify status properly resets
